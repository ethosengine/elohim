<div class="editor-page">
  <!-- Header -->
  <header class="editor-header">
    <div class="header-left">
      <button class="btn-back" (click)="navigateBack()">
        <span class="icon">&larr;</span>
        Back to Resource
      </button>
    </div>

    <div class="header-center">
      <h1 class="page-title">
        <span *ngIf="node">Edit: {{ node.title }}</span>
        <span *ngIf="!node && isLoading">Loading...</span>
        <span *ngIf="!node && !isLoading && error">Edit Content</span>
      </h1>
    </div>

    <div class="header-right">
      <!-- Status indicators -->
      <span class="status-saving" *ngIf="isSaving">Saving...</span>
    </div>
  </header>

  <!-- Messages -->
  <div class="messages">
    <div class="message message-success" *ngIf="saveSuccess">
      {{ saveSuccess }}
    </div>
    <div class="message message-error" *ngIf="saveError">
      {{ saveError }}
    </div>
  </div>

  <!-- Main Content -->
  <main class="editor-main">
    <!-- Loading State -->
    <div class="loading-state" *ngIf="isLoading">
      <div class="loading-spinner"></div>
      <p>Loading content...</p>
    </div>

    <!-- Error State -->
    <div class="error-state" *ngIf="!isLoading && error">
      <h2>Unable to load content</h2>
      <p>{{ error }}</p>
      <button class="btn btn-primary" (click)="navigateBack()">
        Go Back
      </button>
    </div>

    <!-- Not Editable State -->
    <div class="not-editable-state" *ngIf="!isLoading && !error && node && !canEdit">
      <h2>Cannot Edit This Content</h2>
      <p *ngIf="node.id.startsWith('path-')">
        This content is generated from a learning path.
        To edit, you'll need to edit the path directly.
      </p>
      <p *ngIf="!node.id.startsWith('path-')">
        You don't have permission to edit this content.
      </p>
      <button class="btn btn-primary" (click)="navigateBack()">
        View Content
      </button>
    </div>

    <!-- Editor Host -->
    <div class="editor-container" *ngIf="!isLoading && !error && node && canEdit">
      <ng-container #editorHost></ng-container>
    </div>
  </main>

  <!-- Footer -->
  <footer class="editor-footer" *ngIf="!isLoading && !error && node && canEdit">
    <div class="footer-info">
      <span class="format">Format: {{ node.contentFormat }}</span>
      <span class="type">Type: {{ node.contentType }}</span>
    </div>
    <div class="footer-hint">
      Changes are saved to local drafts. Holochain persistence coming soon.
    </div>
  </footer>
</div>
