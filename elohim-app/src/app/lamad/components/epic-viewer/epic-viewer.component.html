<div class="epic-viewer" *ngIf="epic">
  <!-- Epic Header -->
  <div class="epic-header">
    <div class="breadcrumb">
      <a routerLink="/lamad">Home</a> / <span>Epic</span>
    </div>

    <h1 class="epic-title">{{ epic.title }}</h1>

    <div class="epic-meta">
      <span class="meta-badge" *ngIf="epic.version">Version {{ epic.version }}</span>
      <span class="meta-badge" *ngIf="epic.category">{{ epic.category }}</span>
      <span class="meta-badge" *ngIf="epic.authors && epic.authors.length > 0">
        {{ epic.authors.join(', ') }}
      </span>
    </div>

    <div class="epic-tags" *ngIf="epic.tags.length > 0">
      <span *ngFor="let tag of epic.tags" class="tag">{{ tag }}</span>
    </div>
  </div>

  <!-- Two Column Layout -->
  <div class="epic-content-layout">
    <!-- Sidebar -->
    <aside class="epic-sidebar">
      <!-- Table of Contents -->
      <div class="toc-card">
        <h3>Table of Contents</h3>
        <nav class="toc-nav">
          <a
            *ngFor="let section of getSectionAnchors()"
            [class]="'toc-link toc-level-' + section.level"
            (click)="scrollToSection(section.anchor)"
          >
            {{ section.title }}
          </a>
        </nav>
      </div>

      <!-- Related Features -->
      <div class="related-card" *ngIf="relatedFeatures.length > 0">
        <h3>Implementing Features</h3>
        <div class="related-list">
          <a
            *ngFor="let feature of relatedFeatures"
            [routerLink]="['/lamad/content', feature.id]"
            class="related-item"
          >
            <span class="related-icon">⚡</span>
            <span class="related-title">{{ feature.title }}</span>
          </a>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="epic-main">
      <div class="markdown-content" [innerHTML]="renderedContent"></div>
    </main>
  </div>
</div>

<div class="not-found" *ngIf="!epic">
  <h2>Epic Not Found</h2>
  <p>The requested epic could not be found.</p>
  <a routerLink="/lamad" class="back-button">← Back to Documentation</a>
</div>
