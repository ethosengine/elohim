/* =============================================================================
   Gherkin Renderer Styles
   ============================================================================= */

.gherkin-container {
  font-family:
    system-ui,
    -apple-system,
    sans-serif;
  padding: 1rem;
  max-width: 900px;
  margin: 0 auto;
}

/* Embedded mode - let parent control width */
.gherkin-container.embedded {
  max-width: 100%;
  padding: 0;
  margin: 0;
}

/* =============================================================================
   Feature Header
   ============================================================================= */

.feature-header {
  margin-bottom: 2rem;
  padding-bottom: 1.5rem;
  border-bottom: 2px solid var(--lamad-border, #e5e7eb);
}

.feature-tags {
  margin-bottom: 0.75rem;
}

.tag {
  display: inline-block;
  padding: 0.25rem 0.625rem;
  margin-right: 0.5rem;
  margin-bottom: 0.25rem;
  background: var(--lamad-accent-light, #eef2ff);
  color: var(--lamad-accent-primary, #6366f1);
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 500;
}

.feature-title {
  font-size: 1.75rem;
  font-weight: 600;
  margin: 0 0 0.75rem;
  color: var(--lamad-text-primary, #1f2937);
}

.feature-title .keyword {
  color: var(--lamad-accent-primary, #6366f1);
}

.feature-description {
  margin: 0.75rem 0;
  color: var(--lamad-text-secondary, #64748b);
  line-height: 1.6;
}

.feature-stats {
  display: flex;
  gap: 1rem;
  margin-top: 1rem;
}

.stat {
  font-size: 0.875rem;
  color: var(--lamad-text-tertiary, #9ca3af);
}

/* =============================================================================
   Background Section
   ============================================================================= */

.background-section {
  margin-bottom: 1.5rem;
  padding: 1rem;
  background: var(--lamad-bg-tertiary, #f8fafc);
  border-radius: 0.5rem;
  border-left: 4px solid var(--lamad-warning, #f59e0b);
}

.background-section .scenario-title {
  font-size: 1.125rem;
  margin: 0 0 1rem;
}

/* =============================================================================
   Scenario Sections
   ============================================================================= */

.scenario-section {
  margin-bottom: 1rem;
  border: 1px solid var(--lamad-border, #e5e7eb);
  border-radius: 0.5rem;
  overflow: hidden;
  transition: box-shadow 0.15s ease;
}

.scenario-section:hover {
  box-shadow: 0 2px 8px rgb(0 0 0 / 5%);
}

.scenario-header {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0.5rem;
  padding: 1rem;
  background: var(--lamad-bg-secondary, #f8fafc);
  cursor: pointer;
  user-select: none;
  transition: background 0.15s ease;
}

.scenario-header:hover {
  background: var(--lamad-bg-tertiary, #f1f5f9);
}

.scenario-tags {
  width: 100%;
  margin-bottom: 0.25rem;
}

.scenario-title {
  flex: 1;
  font-size: 1rem;
  font-weight: 500;
  margin: 0;
  color: var(--lamad-text-primary, #1f2937);
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.expand-icon {
  font-size: 0.75rem;
  color: var(--lamad-text-tertiary, #9ca3af);
  width: 1rem;
  text-align: center;
}

.step-count {
  font-size: 0.75rem;
  color: var(--lamad-text-tertiary, #9ca3af);
  white-space: nowrap;
}

.scenario-body {
  padding: 1rem;
  border-top: 1px solid var(--lamad-border, #e5e7eb);
}

.scenario-section.collapsed .scenario-body {
  display: none;
}

/* =============================================================================
   Keywords
   ============================================================================= */

.keyword {
  font-weight: 600;
  color: var(--lamad-accent-primary, #6366f1);
}

/* =============================================================================
   Steps
   ============================================================================= */

.steps {
  font-family: 'SF Mono', 'Fira Code', Monaco, Consolas, monospace;
  font-size: 0.875rem;
}

.step {
  display: flex;
  padding: 0.5rem 0;
  line-height: 1.5;
}

.step-keyword {
  font-weight: 600;
  min-width: 4rem;
  flex-shrink: 0;
}

/* Keyword colors */
.keyword-given {
  color: #2563eb;
} /* Blue */
.keyword-when {
  color: #7c3aed;
} /* Purple */
.keyword-then {
  color: #059669;
} /* Green */
.keyword-and {
  color: #64748b;
} /* Gray */
.keyword-but {
  color: #dc2626;
} /* Red */
.keyword-\* {
  color: #64748b;
} /* Gray for * */

.step-text {
  color: var(--lamad-text-primary, #374151);
}

/* Highlight placeholders in steps */
.step-text :global(.placeholder) {
  color: var(--lamad-warning, #f59e0b);
  font-weight: 500;
}

/* Highlight strings in steps */
.step-text :global(.string) {
  color: #059669;
}

/* =============================================================================
   Doc Strings
   ============================================================================= */

.doc-string {
  margin: 0.5rem 0 0.5rem 4rem;
  padding: 0.75rem 1rem;
  background: #1e293b;
  color: #e2e8f0;
  border-radius: 0.375rem;
  font-size: 0.8125rem;
  overflow-x: auto;
  white-space: pre-wrap;
}

/* =============================================================================
   Data Tables - with responsive scroll wrapper
   ============================================================================= */

/* Table scroll wrapper for responsive handling */
.table-wrapper {
  display: block;
  width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  margin: 0.75rem 0;
}

.table-wrapper .data-table {
  margin: 0;
}

.data-table {
  margin: 0.75rem 0;
  border-collapse: collapse;
  font-size: 0.8125rem;
  width: auto;
  min-width: 100%;
}

.step-table {
  margin-left: 4rem;
}

/* Ensure step tables also get scroll wrapper treatment */
.step-table-wrapper {
  margin-left: 4rem;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

.step-table-wrapper .data-table {
  margin-left: 0;
}

.data-table th,
.data-table td {
  padding: 0.5rem 0.75rem;
  border: 1px solid var(--lamad-border, #e5e7eb);
  text-align: left;
}

.data-table th {
  background: var(--lamad-bg-secondary, #f8fafc);
  font-weight: 600;
  color: var(--lamad-text-primary, #1f2937);
}

.data-table td {
  background: white;
  color: var(--lamad-text-primary, #374151);
}

.data-table tr:hover td {
  background: var(--lamad-bg-tertiary, #f1f5f9);
}

/* =============================================================================
   Examples
   ============================================================================= */

.examples {
  margin-top: 1.5rem;
  padding-top: 1rem;
  border-top: 1px dashed var(--lamad-border, #e5e7eb);
}

.example-block {
  margin-bottom: 1rem;
}

.example-title {
  font-size: 0.9375rem;
  font-weight: 500;
  margin: 0 0 0.75rem;
  color: var(--lamad-text-secondary, #64748b);
}

.example-title .keyword {
  color: var(--lamad-accent-secondary, #4f46e5);
}

/* =============================================================================
   Fallback (unparsed content)
   ============================================================================= */

.gherkin-fallback {
  padding: 1rem;
  background: var(--lamad-bg-tertiary, #f8fafc);
  border-radius: 0.5rem;
  overflow-x: auto;
}

.gherkin-fallback pre {
  margin: 0;
  font-family: 'SF Mono', 'Fira Code', Monaco, Consolas, monospace;
  font-size: 0.875rem;
  line-height: 1.6;
}

.gherkin-fallback code {
  color: var(--lamad-text-primary, #374151);
}

/* =============================================================================
   Dark Mode Support
   ============================================================================= */

@media (prefers-color-scheme: dark) {
  .tag {
    background: var(--lamad-accent-dark, #312e81);
    color: var(--lamad-accent-light, #a5b4fc);
  }

  .scenario-section {
    border-color: var(--lamad-border, #334155);
  }

  .scenario-header {
    background: var(--lamad-bg-secondary, #1e293b);
  }

  .scenario-header:hover {
    background: var(--lamad-bg-tertiary, #334155);
  }

  .scenario-body {
    border-top-color: var(--lamad-border, #334155);
  }

  .background-section {
    background: var(--lamad-bg-secondary, #1e293b);
  }

  .data-table th {
    background: var(--lamad-bg-secondary, #1e293b);
  }

  .data-table td {
    background: var(--lamad-bg-primary, #0f172a);
  }

  .data-table tr:hover td {
    background: var(--lamad-bg-tertiary, #334155);
  }

  .data-table th,
  .data-table td {
    border-color: var(--lamad-border, #334155);
  }

  .gherkin-fallback {
    background: var(--lamad-bg-secondary, #1e293b);
  }

  .gherkin-fallback code {
    color: var(--lamad-text-primary, #e2e8f0);
  }
}

/* =============================================================================
   Responsive Breakpoints
   =============================================================================
   Using standardized breakpoints:
   - 480px (--bp-sm): Small mobile
   - 768px (--bp-md): Tablet / Large mobile
   - 1024px (--bp-lg): Desktop
   ============================================================================= */

/* Tablet (768px - 1024px) */
@media (width <= 1024px) {
  .gherkin-container {
    padding: 0.75rem;
  }

  /* Ensure touch-friendly tap targets for scenario headers */
  .scenario-header {
    min-height: 56px;
    padding: 0.875rem 1rem;
  }

  .expand-icon {
    min-width: 44px;
    min-height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
}

/* Mobile (max-width: 768px) */
@media (width <= 768px) {
  .gherkin-container {
    padding: 0.5rem;
  }

  .feature-title {
    font-size: 1.5rem;
  }

  .feature-stats {
    flex-wrap: wrap;
    gap: 0.75rem;
  }

  .step {
    flex-direction: column;
    gap: 0.25rem;
  }

  .step-keyword {
    min-width: auto;
  }

  .doc-string,
  .step-table,
  .step-table-wrapper {
    margin-left: 0;
  }

  .data-table {
    font-size: 0.75rem;
  }

  .data-table th,
  .data-table td {
    padding: 0.375rem 0.5rem;
  }

  .scenario-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.5rem;
  }

  .scenario-title {
    font-size: 0.9375rem;
  }
}

/* Small mobile (max-width: 480px) */
@media (width <= 480px) {
  .gherkin-container {
    padding: 0.25rem;
  }

  .feature-header {
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
  }

  .feature-title {
    font-size: 1.25rem;
  }

  .feature-description {
    font-size: 0.9375rem;
  }

  .scenario-section {
    border-radius: 0.375rem;
  }

  .scenario-header {
    padding: 0.75rem;
  }

  .scenario-body {
    padding: 0.75rem;
  }

  .steps {
    font-size: 0.8125rem;
  }

  .data-table th,
  .data-table td {
    padding: 0.25rem 0.375rem;
    font-size: 0.6875rem;
  }

  .doc-string {
    padding: 0.5rem 0.75rem;
    font-size: 0.75rem;
  }
}
