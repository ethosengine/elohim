# Elohim Storage - Content Storage & Session Management
#
# RUSTFLAGS is baked in â€” just `just build` and go.

set dotenv-load := false

export RUSTFLAGS := '--cfg getrandom_backend="custom"'

# List available recipes
default:
    @just --list

# Build release binary
build:
    cargo build --release

# Build debug binary
build-dev:
    cargo build

# Run tests
test:
    cargo test

# Export TypeScript type bindings
export-bindings:
    cargo test export_bindings

# Type-check without building
check:
    cargo check

# Lint with clippy
clippy:
    cargo clippy -- -D warnings

# Format code
fmt:
    cargo fmt

# Check formatting without modifying
fmt-check:
    cargo fmt --check

# Remove build artifacts
clean:
    cargo clean

# Quality gate: fmt-check + clippy + test
gate: fmt-check clippy test
