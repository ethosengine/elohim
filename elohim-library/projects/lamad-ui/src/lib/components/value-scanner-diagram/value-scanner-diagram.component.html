<div class="scanner-container">
  <h3 class="title">The Value Scanner Protocol</h3>
  <p class="description">
    Transforming a simple purchase into a multidimensional bundle of economic, social, and emotional
    value.
  </p>

  <div class="timeline-container">
    <!-- Connecting Line -->
    <div class="line-background"></div>
    <div class="line-progress" [style.width.%]="(step / 3) * 100"></div>

    <!-- Steps -->
    <div class="steps-wrapper">
      <div *ngFor="let s of steps; let i = index" class="step-item">
        <div class="step-icon-wrapper" [class.active]="i <= step">
          <!-- Render Emoji or Custom content -->
          <ng-container *ngIf="s.title !== 'Negotiate' && s.title !== 'Story'">
            <span class="emoji-icon">{{ s.icon }}</span>
          </ng-container>

          <!-- Custom Negotiate Animation -->
          <ng-container *ngIf="s.title === 'Negotiate'">
            <div class="negotiate-dots">
              <div class="dot dot-blue"></div>
              <div class="dot dot-green"></div>
              <div class="dot dot-gold"></div>
            </div>
          </ng-container>

          <!-- Custom Story Icon -->
          <ng-container *ngIf="s.title === 'Story'">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="#ef4444"
              stroke="#ef4444"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path
                d="M19 14c1.49-1.28 3.6-2.33 3.66-5.22C22.67 5.11 19.93 3 16.99 3c-1.78 0-3.57.97-4.99 2.51C10.58 3.97 8.79 3 7.01 3 4.07 3 1.33 5.11 1.34 8.78c.06 2.89 2.17 3.94 3.66 5.22l7.02 7.01 7-7.01Z"
              />
            </svg>
          </ng-container>
        </div>

        <div class="step-content">
          <div class="step-title" [class.active-text]="i <= step">{{ s.title }}</div>
          <div class="step-desc" [class.active-desc]="i === step">{{ s.desc }}</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bundle Card -->
  <div class="bundle-card">
    <div class="bundle-header">TRANSACTION BUNDLE #{{ 1000 + step }}</div>
    <div class="bundle-rows">
      <div class="bundle-row">
        <span class="row-label">Transaction Cost</span>
        <span class="row-value">$4.50</span>
      </div>

      <div class="bundle-row transition-row" [class.visible]="step >= 2">
        <span class="row-label">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="12"
            height="12"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="label-icon"
          >
            <path
              d="M19 14c1.49-1.28 3.6-2.33 3.66-5.22C22.67 5.11 19.93 3 16.99 3c-1.78 0-3.57.97-4.99 2.51C10.58 3.97 8.79 3 7.01 3 4.07 3 1.33 5.11 1.34 8.78c.06 2.89 2.17 3.94 3.66 5.22l7.02 7.01 7-7.01Z"
            />
          </svg>
          Care Value
        </span>
        <span class="row-value value-care">+15 Tokens</span>
      </div>

      <div class="bundle-row transition-row" [class.visible]="step >= 2">
        <span class="row-label">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="12"
            height="12"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="label-icon"
          >
            <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" />
            <circle cx="9" cy="7" r="4" />
            <path d="M22 21v-2a4 4 0 0 0-3-3.87" />
            <path d="M16 3.13a4 4 0 0 1 0 7.75" />
          </svg>
          Community
        </span>
        <span class="row-value value-community">Johnson Farm</span>
      </div>
    </div>
  </div>
</div>
